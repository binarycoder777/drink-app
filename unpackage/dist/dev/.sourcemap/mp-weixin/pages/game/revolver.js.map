{"version":3,"file":"revolver.js","sources":["pages/game/revolver.vue","pages/game/revolver.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"page-container\">\n    <!-- 添加标题区域 -->\n    <view class=\"game-header\">\n      <text class=\"title neon-text\">左轮游戏</text>\n      <text class=\"subtitle glow-text\">生死一线 命运一转</text>\n    </view>\n    \n    <view class=\"game-container\">\n      <!-- 左轮手枪区域 -->\n      <view class=\"revolver-container glow-effect\">\n        <image class=\"revolver\" :src=\"revolverImage\" :class=\"{ 'firing': isFiring }\" />\n      </view>\n      \n      <!-- 结果显示 -->\n      <view class=\"result neon-text\" :class=\"{ 'danger': isDanger }\">\n        {{ resultText }}\n      </view>\n      \n      <!-- 按钮区域 -->\n      <view class=\"button-container\">\n        <view class=\"neon-button info\" @tap=\"showBulletSelector\">\n          {{ bulletCount }}颗子弹\n        </view>\n        <view class=\"neon-button\" @tap=\"spinCylinder\" :class=\"{ 'disabled': isSpinning || isFiring }\">\n          旋转弹仓\n        </view>\n        <view class=\"neon-button danger\" @tap=\"pullTrigger\" :class=\"{ 'disabled': isSpinning || isFiring }\">\n          扣动扳机\n        </view>\n      </view>\n    </view>\n\n    <!-- 在 game-container 中添加 -->\n    <view class=\"modal\" v-if=\"showBulletOptions\">\n      <view class=\"modal-content\">\n        <text class=\"modal-title neon-text\">选择子弹数量</text>\n        <view class=\"modal-options-container\">\n          <view class=\"options-row\">\n            <view \n              v-for=\"n in 3\" \n              :key=\"n\" \n              class=\"modal-option\"\n              :class=\"{ 'active': bulletCount === n }\"\n              @tap=\"selectBulletCount(n)\"\n            >\n              {{ n }}\n            </view>\n          </view>\n          <view class=\"options-row\">\n            <view \n              v-for=\"n in 3\" \n              :key=\"n + 3\" \n              class=\"modal-option\"\n              :class=\"{ 'active': bulletCount === (n + 3) }\"\n              @tap=\"selectBulletCount(n + 3)\"\n            >\n              {{ n + 3 }}\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      revolverImage: '/static/images/revolver-body.png',\n      resultText: '准备开始游戏',\n      chambers: Array(6).fill().map(() => ({ loaded: false })),\n      currentChamber: 0,\n      isSpinning: false,\n      isFiring: false,\n      isDanger: false,\n      showBulletOptions: false,\n      bulletCount: 1  // 默认1颗子弹\n    }\n  },\n  \n  mounted() {\n    this.initGame()\n  },\n  \n  methods: {\n    initGame() {\n      // 先清空所有弹仓\n      this.chambers = Array(6).fill().map(() => ({ loaded: false }))\n      \n      // 随机装填指定数量的子弹\n      let remainingBullets = this.bulletCount\n      let availablePositions = [0, 1, 2, 3, 4, 5]\n      \n      while (remainingBullets > 0) {\n        const randomIndex = Math.floor(Math.random() * availablePositions.length)\n        const position = availablePositions[randomIndex]\n        this.chambers[position].loaded = true\n        availablePositions.splice(randomIndex, 1)\n        remainingBullets--\n      }\n      \n      this.currentChamber = Math.floor(Math.random() * 6)\n      this.resultText = '准备开始游戏'\n      this.isDanger = false\n    },\n    \n    async spinCylinder() {\n      if (this.isSpinning || this.isFiring) return\n      \n      this.isSpinning = true\n      this.resultText = '弹仓旋转中...'\n      this.isDanger = false\n      \n      // 播放旋转音效\n    //   await this.playSound('spin.mp3')\n      \n      // 震动反馈\n      uni.vibrateShort()\n      \n      // 随机旋转时间：1-2秒\n      const duration = 1000 + Math.random() * 1000\n      \n      setTimeout(() => {\n        this.currentChamber = Math.floor(Math.random() * 6)\n        this.isSpinning = false\n        this.resultText = '弹仓已就绪'\n        \n        // 再次震动提示准备完成\n        uni.vibrateShort()\n      }, duration)\n    },\n    \n    async pullTrigger() {\n      if (this.isSpinning || this.isFiring) return\n      \n      this.isFiring = true\n      \n      // 检查当前弹仓是否有子弹\n      const hasBullet = this.chambers[this.currentChamber].loaded\n      \n      if (hasBullet) {\n        // 中弹效果\n        // await this.playSound('gunshot.mp3')\n        uni.vibrateLong()\n        this.resultText = '💥 中弹！喝一杯！'\n        this.isDanger = true\n        \n        // 消耗掉当前弹仓的子弹\n        this.chambers[this.currentChamber].loaded = false\n        // 更新剩余子弹数量\n        this.bulletCount = this.chambers.filter(chamber => chamber.loaded).length\n        \n        // 如果没有子弹了，提示重新开始\n        if (this.bulletCount === 0) {\n          setTimeout(() => {\n            this.resultText = '弹仓已空，请重新装填'\n          }, 1500)\n        }\n      } else {\n        // 空枪效果\n        // await this.playSound('empty-click.mp3')\n        uni.vibrateShort()\n        this.resultText = '✅ 空枪！暂时安全～'\n        this.isDanger = false\n      }\n      \n      // 移动到下一个弹仓\n      this.currentChamber = (this.currentChamber + 1) % 6\n      \n      setTimeout(() => {\n        this.isFiring = false\n      }, 500)\n    },\n    \n    playSound(soundFile) {\n      return new Promise((resolve) => {\n        const innerAudioContext = uni.createInnerAudioContext()\n        innerAudioContext.src = `/static/sounds/${soundFile}`\n        innerAudioContext.onEnded(() => {\n          innerAudioContext.destroy()\n          resolve()\n        })\n        innerAudioContext.play()\n      })\n    },\n\n    showBulletSelector() {\n      if (!this.isSpinning && !this.isFiring) {\n        this.showBulletOptions = true\n      }\n    },\n\n    selectBulletCount(count) {\n      this.bulletCount = count\n      this.showBulletOptions = false\n      this.initGame()  // 重新初始化游戏\n    }\n  }\n}\n</script>\n\n<style>\n/* 复用骰子游戏的基础样式 */\n.page-container {\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(to bottom, #0D0D2B 0%, #1A1A3A 100%);\n  position: relative;\n  overflow: hidden;\n}\n\n.page-container::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: radial-gradient(circle at center, transparent 0%, #0D0D2B 70%);\n  animation: pulse 4s ease-in-out infinite;\n  z-index: 0;\n}\n\n.game-header {\n  text-align: center;\n  padding-top: 80rpx;\n  margin-bottom: 40rpx;\n  position: relative;\n  z-index: 1;\n}\n\n.title {\n  font-size: 48rpx;\n  margin-bottom: 10rpx;\n  font-weight: bold;\n}\n\n.neon-text {\n  color: #fff;\n  text-shadow: 0 0 5px #fff,\n               0 0 10px #fff,\n               0 0 20px #ff00de,\n               0 0 30px #ff00de,\n               0 0 40px #ff00de;\n  animation: neon 1.5s ease-in-out infinite alternate;\n}\n\n.subtitle {\n  font-size: 28rpx;\n  color: #00f7ff;\n  margin-top: 10rpx;\n}\n\n.game-container {\n  width: 100%;\n  height: calc(100vh - 200rpx);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n}\n\n/* 左轮手枪容器样式 */\n.revolver-container {\n  width: 600rpx;\n  height: 600rpx;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 40rpx;\n}\n\n.revolver {\n  width: 400rpx;\n  height: 400rpx;\n  transition: transform 0.1s ease;\n}\n\n.revolver.firing {\n  transform: rotate(-15deg) translateX(-20rpx);\n}\n\n/* 弹仓显示样式 */\n.cylinder-display {\n  display: flex;\n  justify-content: center;\n  gap: 20rpx;\n  margin-top: 40rpx;\n}\n\n.chamber {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 50%;\n  border: 2px solid #00f7ff;\n  background: rgba(0, 247, 255, 0.1);\n  box-shadow: 0 0 10px rgba(0, 247, 255, 0.3);\n  transition: all 0.3s ease;\n}\n\n.chamber.current {\n  border-color: #ff00de;\n  box-shadow: 0 0 15px #ff00de;\n}\n\n.chamber.loaded {\n  background: rgba(255, 0, 0, 0.3);\n}\n\n/* 结果显示样式 */\n.result {\n  font-size: 36rpx;\n  margin: 40rpx 0;\n  text-align: center;\n  min-height: 50rpx;\n}\n\n.result.danger {\n  color: #ff0000;\n  text-shadow: 0 0 5px #ff0000,\n               0 0 10px #ff0000,\n               0 0 20px #ff0000;\n}\n\n/* 按钮样式 */\n.button-container {\n  display: flex;\n  justify-content: center;\n  gap: 40rpx;\n  margin-top: 40rpx;\n}\n\n.neon-button {\n  background: transparent;\n  border: 2px solid #00f7ff;\n  color: #00f7ff;\n  padding: 20rpx 60rpx;\n  font-size: 32rpx;\n  border-radius: 50rpx;\n  text-transform: uppercase;\n  font-weight: bold;\n  box-shadow: 0 0 10px #00f7ff,\n              inset 0 0 10px #00f7ff;\n  transition: all 0.3s ease;\n}\n\n.neon-button.danger {\n  border-color: #ff00de;\n  color: #ff00de;\n  box-shadow: 0 0 10px #ff00de,\n              inset 0 0 10px #ff00de;\n}\n\n.neon-button.disabled {\n  opacity: 0.5;\n  pointer-events: none;\n}\n\n.neon-button:active {\n  transform: scale(0.95);\n}\n\n@keyframes pulse {\n  0% { opacity: 0.5; }\n  50% { opacity: 0.8; }\n  100% { opacity: 0.5; }\n}\n\n@keyframes neon {\n  from {\n    text-shadow: 0 0 5px #fff,\n                 0 0 10px #fff,\n                 0 0 20px #ff00de,\n                 0 0 30px #ff00de;\n  }\n  to {\n    text-shadow: 0 0 5px #fff,\n                 0 0 10px #fff,\n                 0 0 20px #ff00de,\n                 0 0 30px #ff00de,\n                 0 0 40px #ff00de;\n  }\n}\n\n/* 弹窗样式 */\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(13, 13, 43, 0.95);\n  backdrop-filter: blur(10px);\n  z-index: 99999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  animation: modalFadeIn 0.3s ease;\n}\n\n.modal-content {\n  background: rgba(26, 26, 58, 0.95);\n  border-radius: 30rpx;\n  padding: 60rpx 40rpx;\n  width: 85%;\n  max-width: 600rpx;\n  border: 2px solid #ff00de;\n  box-shadow: 0 0 30px rgba(255, 0, 222, 0.3),\n              inset 0 0 20px rgba(255, 0, 222, 0.2);\n}\n\n.modal-title {\n  text-align: center;\n  margin-bottom: 50rpx;\n  font-size: 36rpx;\n  font-weight: bold;\n}\n\n.modal-options-container {\n  display: flex;\n  flex-direction: column;\n  gap: 40rpx;\n}\n\n.options-row {\n  display: flex;\n  justify-content: center;\n  gap: 60rpx;\n}\n\n.modal-option {\n  width: 100rpx;\n  height: 100rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid #00f7ff;\n  border-radius: 50%;\n  color: #00f7ff;\n  font-size: 36rpx;\n  font-weight: bold;\n  background: rgba(0, 247, 255, 0.1);\n  box-shadow: 0 0 15px rgba(0, 247, 255, 0.3);\n  transition: all 0.3s ease;\n}\n\n.modal-option.active {\n  border-color: #ff00de;\n  color: #ff00de;\n  box-shadow: 0 0 20px #ff00de;\n}\n\n/* 信息按钮样式 */\n.neon-button.info {\n  border-color: #00f7ff;\n  color: #00f7ff;\n  box-shadow: 0 0 10px #00f7ff,\n              inset 0 0 10px #00f7ff;\n}\n\n@keyframes modalFadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n</style>\n  ","import MiniProgramPage from '/Users/weitao/Desktop/ThinGift/drink-app/pages/game/revolver.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}