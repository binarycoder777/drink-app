{"version":3,"file":"revolver.js","sources":["pages/game/revolver.vue","pages/game/revolver.vue?type=page"],"sourcesContent":["<template>\n    <view class=\"container\">\n        <canvas type=\"webgl\" id=\"webgl\" class=\"webgl-canvas\"\n            @touchstart=\"onTouchStart\"\n            @touchmove=\"onTouchMove\"\n            @touchend=\"onTouchEnd\">\n        </canvas>\n        <view class=\"controls\">\n            <button class=\"spin-btn\" @tap=\"spinCylinder\">旋转弹仓</button>\n            <button class=\"fire-btn\" @tap=\"pullTrigger\">开火</button>\n        </view>\n    </view>\n</template>\n\n<script>\nimport { createScopedThreejs } from 'threejs-miniprogram'\nimport { markRaw } from 'vue'\n\nexport default {\n    data() {\n        return {\n            THREE: null,\n            scene: null,\n            camera: null,\n            renderer: null,\n            canvas: null,\n            revolver: null,\n            cylinder: null,\n            bullets: [true, false, false, false, false, false],\n            currentChamber: 0,\n            isSpinning: false,\n            animationFrameId: null,\n            canvasWidth: 0,\n            canvasHeight: 0,\n            isDragging: false,\n            previousTouch: {\n                x: 0,\n                y: 0\n            },\n            rotationSpeed: 0.01,\n            currentRotation: {\n                x: 0,\n                y: Math.PI / 12\n            }\n        }\n    },\n    \n    async mounted() {\n        try {\n            // 增加延迟确保 canvas 节点已经准备好\n            await new Promise(resolve => setTimeout(resolve, 1000));\n            \n            const sysInfo = uni.getSystemInfoSync();\n            this.canvasWidth = sysInfo.windowWidth;\n            this.canvasHeight = sysInfo.windowHeight;\n            \n            // 获取 canvas 上下文\n            const query = uni.createSelectorQuery().in(this);\n            const canvas = await new Promise((resolve, reject) => {\n                query.select('#webgl')\n                    .node()\n                    .exec((res) => {\n                        if (res[0] && res[0].node) {\n                            resolve(res[0].node);\n                        } else {\n                            reject(new Error('Canvas element not found'));\n                        }\n                    });\n            });\n            \n            this.canvas = markRaw(canvas);\n            const gl = canvas.getContext('webgl', {\n                alpha: true,\n                antialias: true,\n                premultipliedAlpha: false,\n                preserveDrawingBuffer: false\n            });\n            \n            if (!gl) {\n                throw new Error('WebGL context not available');\n            }\n            \n            await this.initThree();\n            this.animate();\n        } catch (error) {\n            console.error('Initialization error:', error);\n        }\n    },\n    \n    methods: {\n        async initThree() {\n            const canvas = this.canvas;\n            const sysInfo = uni.getSystemInfoSync();\n            const pixelRatio = sysInfo.pixelRatio || 1;\n            \n            canvas.width = this.canvasWidth * pixelRatio;\n            canvas.height = this.canvasHeight * pixelRatio;\n            \n            try {\n                this.THREE = markRaw(createScopedThreejs(canvas));\n                this.scene = markRaw(new this.THREE.Scene());\n                \n                // 创建相机\n                this.camera = markRaw(new this.THREE.PerspectiveCamera(\n                    45,\n                    this.canvasWidth / this.canvasHeight,\n                    0.1,\n                    1000\n                ));\n                this.camera.position.set(0, 0.1, 2);\n                this.camera.lookAt(0, 0, 0);\n                \n                // 创建渲染器\n                this.renderer = markRaw(new this.THREE.WebGLRenderer({\n                    canvas,\n                    context: canvas.getContext('webgl'),\n                    antialias: true,\n                    alpha: true\n                }));\n                \n                this.renderer.setPixelRatio(pixelRatio);\n                this.renderer.setSize(this.canvasWidth, this.canvasHeight);\n                this.renderer.setClearColor(0xdddddd, 0);\n                \n                // 添加灯光\n                const ambientLight = markRaw(new this.THREE.AmbientLight(0xffffff, 0.4));\n                this.scene.add(ambientLight);\n                \n                const mainLight = markRaw(new this.THREE.DirectionalLight(0xffffff, 0.8));\n                mainLight.position.set(2, 2, 2);\n                this.scene.add(mainLight);\n                \n                const fillLight = markRaw(new this.THREE.DirectionalLight(0xffffff, 0.4));\n                fillLight.position.set(-2, -1, 2);\n                this.scene.add(fillLight);\n                \n                // 添加背景色\n                this.scene.background = new this.THREE.Color(0xdddddd);\n                \n                // 创建左轮手枪模型\n                this.createRevolver();\n                \n            } catch (error) {\n                console.error('THREE.js initialization error:', error);\n                throw error;\n            }\n        },\n        \n        createRevolver() {\n            // 材质定义\n            const blackMetalMaterial = markRaw(new this.THREE.MeshPhongMaterial({\n                color: 0x2a2a2a,\n                shininess: 30,\n                specular: 0x222222\n            }));\n            \n            const silverMetalMaterial = markRaw(new this.THREE.MeshPhongMaterial({\n                color: 0xdddddd,\n                shininess: 50,\n                specular: 0x444444\n            }));\n\n            // 确保正确初始化 revolver 组\n            this.revolver = markRaw(new this.THREE.Group());\n\n            // 顶部导轨\n            const createRailSystem = () => {\n                const railGroup = new this.THREE.Group();\n                \n                // 主导轨\n                const railBaseGeometry = markRaw(new this.THREE.BoxGeometry(0.8, 0.05, 0.2));\n                const railBase = markRaw(new this.THREE.Mesh(railBaseGeometry, silverMetalMaterial));\n                railBase.position.set(0.4, 0.35, 0);\n\n                // 导轨齿\n                for(let i = 0; i < 12; i++) {\n                    const toothGeometry = markRaw(new this.THREE.BoxGeometry(0.03, 0.03, 0.2));\n                    const tooth = markRaw(new this.THREE.Mesh(toothGeometry, silverMetalMaterial));\n                    tooth.position.set(0.1 + (i * 0.05), 0.38, 0);\n                    railGroup.add(tooth);\n                }\n                \n                railGroup.add(railBase);\n                return railGroup;\n            };\n\n            // 改进弹仓设计\n            const createCylinder = () => {\n                const cylinderGroup = new this.THREE.Group();\n                \n                // 主弹仓 - 更现代的设计\n                const cylinderGeometry = markRaw(new this.THREE.CylinderGeometry(0.2, 0.2, 0.35, 24));\n                const cylinder = markRaw(new this.THREE.Mesh(cylinderGeometry, silverMetalMaterial));\n                cylinder.rotation.z = Math.PI / 2;\n                cylinder.position.set(0.3, 0.12, 0);\n\n                // 弹仓花纹\n                for(let i = 0; i < 8; i++) {\n                    const grooveGeometry = markRaw(new this.THREE.BoxGeometry(0.35, 0.02, 0.02));\n                    const groove = markRaw(new this.THREE.Mesh(grooveGeometry, silverMetalMaterial));\n                    groove.rotation.z = i * Math.PI / 4;\n                    groove.position.set(0.3, 0.12, 0);\n                    cylinderGroup.add(groove);\n                }\n\n                cylinderGroup.add(cylinder);\n                return cylinderGroup;\n            };\n\n            // 改进机匣设计\n            const createFrame = () => {\n                const frameGroup = new this.THREE.Group();\n                \n                // 主机匣\n                const frameShape = new this.THREE.Shape();\n                frameShape.moveTo(0, 0);\n                frameShape.lineTo(0.9, 0);\n                frameShape.lineTo(0.9, 0.3);\n                // 添加通气孔\n                frameShape.lineTo(0.7, 0.3);\n                frameShape.lineTo(0.7, 0.35);\n                frameShape.lineTo(0.2, 0.35);\n                frameShape.bezierCurveTo(0.1, 0.35, 0, 0.3, 0, 0);\n\n                const frameExtrudeSettings = {\n                    steps: 2,\n                    depth: 0.25,\n                    bevelEnabled: true,\n                    bevelThickness: 0.02,\n                    bevelSize: 0.02,\n                    bevelSegments: 4\n                };\n\n                const frame = markRaw(new this.THREE.Mesh(\n                    new this.THREE.ExtrudeGeometry(frameShape, frameExtrudeSettings),\n                    blackMetalMaterial\n                ));\n\n                // 添加装饰性铭文\n                const textGeometry = markRaw(new this.THREE.BoxGeometry(0.2, 0.01, 0.1));\n                const text = markRaw(new this.THREE.Mesh(textGeometry, silverMetalMaterial));\n                text.position.set(0.5, 0.2, 0.13);\n\n                frameGroup.add(frame);\n                frameGroup.add(text);\n                return frameGroup;\n            };\n\n            // 改进手柄设计\n            const createGrip = () => {\n                const gripShape = new this.THREE.Shape();\n                // 更现代的手柄轮廓\n                gripShape.moveTo(0, 0);\n                gripShape.lineTo(0.25, 0);\n                gripShape.bezierCurveTo(\n                    0.25, -0.3,\n                    0.2, -0.5,\n                    0.15, -0.6\n                );\n                gripShape.lineTo(0.1, -0.65);\n                gripShape.bezierCurveTo(\n                    0.05, -0.7,\n                    -0.05, -0.7,\n                    -0.1, -0.65\n                );\n                gripShape.lineTo(-0.15, -0.6);\n                gripShape.bezierCurveTo(\n                    -0.2, -0.5,\n                    -0.15, -0.2,\n                    0, 0\n                );\n\n                const grip = markRaw(new this.THREE.Mesh(\n                    new this.THREE.ExtrudeGeometry(gripShape, {\n                        steps: 2,\n                        depth: 0.25,\n                        bevelEnabled: true,\n                        bevelThickness: 0.02,\n                        bevelSize: 0.02,\n                        bevelSegments: 4\n                    }),\n                    blackMetalMaterial\n                ));\n\n                return grip;\n            };\n\n            // 重新设计击锤组件，调整位置\n            const createHammer = () => {\n                const hammerGroup = new this.THREE.Group();\n                \n                // 击锤主体 - 调整位置到弹仓后方\n                const hammerShape = new this.THREE.Shape();\n                hammerShape.moveTo(0, 0);\n                hammerShape.lineTo(0.06, 0);\n                hammerShape.lineTo(0.06, 0.15);\n                hammerShape.lineTo(0.08, 0.18);\n                hammerShape.lineTo(0.08, 0.25);\n                hammerShape.lineTo(0.03, 0.28);\n                hammerShape.lineTo(0, 0.25);\n                hammerShape.lineTo(0, 0);\n\n                const hammer = markRaw(new this.THREE.Mesh(\n                    new this.THREE.ExtrudeGeometry(hammerShape, {\n                        depth: 0.08,\n                        bevelEnabled: true,\n                        bevelThickness: 0.01,\n                        bevelSize: 0.01,\n                        bevelSegments: 3\n                    }),\n                    silverMetalMaterial\n                ));\n                // 将击锤移到弹仓正后方\n                hammer.position.set(0.1, 0.22, -0.04);\n\n                // 击锤轴心 - 对应调整位置\n                const hammerPin = markRaw(new this.THREE.Mesh(\n                    new this.THREE.CylinderGeometry(0.015, 0.015, 0.1, 12),\n                    silverMetalMaterial\n                ));\n                hammerPin.rotation.x = Math.PI / 2;\n                hammerPin.position.set(0.11, 0.25, 0);\n\n                hammerGroup.add(hammer);\n                hammerGroup.add(hammerPin);\n                \n                return hammerGroup;\n            };\n\n            // 重新设计扳机组件\n            const createTrigger = () => {\n                const triggerGroup = new this.THREE.Group();\n\n                // 扳机护圈\n                const guardShape = new this.THREE.Shape();\n                guardShape.moveTo(0, 0);\n                guardShape.lineTo(0.25, 0);\n                // 更方正的护圈设计\n                guardShape.lineTo(0.25, -0.4);    // 直线下降\n                guardShape.lineTo(0.15, -0.45);   // 小斜角\n                guardShape.lineTo(-0.15, -0.45);  // 平直底部\n                guardShape.lineTo(-0.25, -0.4);   // 小斜角\n                guardShape.lineTo(-0.25, 0);      // 直线上升\n                guardShape.lineTo(0, 0);\n\n                const triggerGuard = markRaw(new this.THREE.Mesh(\n                    new this.THREE.ExtrudeGeometry(guardShape, {\n                        depth: 0.15,\n                        bevelEnabled: true,\n                        bevelThickness: 0.02,\n                        bevelSize: 0.02,\n                        bevelSegments: 4\n                    }),\n                    blackMetalMaterial\n                ));\n                triggerGuard.position.set(0.15, 0, -0.075);\n\n                // 扳机本体 - 更现代的方形设计\n                const triggerShape = new this.THREE.Shape();\n                // 从上方开始\n                triggerShape.moveTo(0, 0);\n                // 前部垂直线\n                triggerShape.lineTo(0.04, 0);\n                triggerShape.lineTo(0.04, -0.15);\n                // 底部水平段\n                triggerShape.lineTo(0.02, -0.15);\n                triggerShape.lineTo(0.02, -0.2);\n                // 后部垂直线\n                triggerShape.lineTo(-0.01, -0.2);\n                triggerShape.lineTo(-0.01, -0.15);\n                triggerShape.lineTo(0, -0.15);\n                triggerShape.lineTo(0, 0);\n\n                const trigger = markRaw(new this.THREE.Mesh(\n                    new this.THREE.ExtrudeGeometry(triggerShape, {\n                        depth: 0.08,\n                        bevelEnabled: true,\n                        bevelThickness: 0.01,\n                        bevelSize: 0.01,\n                        bevelSegments: 3\n                    }),\n                    silverMetalMaterial\n                ));\n                // 调整扳机位置\n                trigger.position.set(0.2, -0.1, -0.04);\n\n                // 扳机轴心\n                const triggerPin = markRaw(new this.THREE.Mesh(\n                    new this.THREE.CylinderGeometry(0.01, 0.01, 0.17, 8),\n                    silverMetalMaterial\n                ));\n                triggerPin.rotation.x = Math.PI / 2;\n                triggerPin.position.set(0.2, -0.1, 0);\n\n                triggerGroup.add(triggerGuard);\n                triggerGroup.add(trigger);\n                triggerGroup.add(triggerPin);\n\n                return triggerGroup;\n            };\n\n            // 组装部分\n            const rail = createRailSystem();\n            const cylinder = createCylinder();\n            const frame = createFrame();\n            const grip = createGrip();\n            const hammer = createHammer();\n            const trigger = createTrigger();\n            \n            this.revolver.add(rail);\n            this.revolver.add(cylinder);\n            this.revolver.add(frame);\n            this.revolver.add(grip);\n            this.revolver.add(hammer);\n            this.revolver.add(trigger);\n\n            // 整体缩放和位置调整\n            const scale = 0.35;\n            this.revolver.scale.set(scale, scale, scale);\n            this.revolver.position.set(-0.3, 0, 0);\n            this.revolver.rotation.y = this.currentRotation.y;\n            this.revolver.rotation.x = this.currentRotation.x;\n\n            // 添加到场景\n            this.scene.add(this.revolver);\n        },\n        \n        animate() {\n            const animate = () => {\n                if (this.renderer && this.scene && this.camera) {\n                    this.renderer.render(this.scene, this.camera);\n                }\n                \n                if (this.canvas) {\n                    this.animationFrameId = this.canvas.requestAnimationFrame(animate);\n                }\n            };\n            \n            if (this.canvas) {\n                this.canvas.requestAnimationFrame(animate);\n            }\n        },\n        \n        spinCylinder() {\n            if (this.isSpinning) return\n            \n            this.isSpinning = true\n            const rotations = 2 + Math.random() * 4\n            const duration = 2000\n            const startTime = Date.now()\n            \n            const spin = () => {\n                const elapsed = Date.now() - startTime\n                const progress = elapsed / duration\n                \n                if (progress < 1) {\n                    const angle = rotations * Math.PI * 2 * (1 - Math.pow(1 - progress, 3))\n                    this.cylinder.rotation.x = angle\n                    this.canvas.requestAnimationFrame(spin)\n                } else {\n                    this.isSpinning = false\n                    this.currentChamber = Math.floor(Math.random() * 6)\n                    uni.showToast({\n                        title: '弹仓已旋转',\n                        icon: 'none'\n                    })\n                }\n            }\n            \n            spin()\n        },\n        \n        pullTrigger() {\n            if (this.isSpinning) return\n            \n            if (this.bullets[this.currentChamber]) {\n                uni.showToast({\n                    title: '砰！',\n                    icon: 'none'\n                })\n            } else {\n                uni.showToast({\n                    title: '咔！',\n                    icon: 'none'\n                })\n            }\n            \n            this.currentChamber = (this.currentChamber + 1) % 6\n        },\n        \n        onTouchStart(event) {\n            this.isDragging = true;\n            const touch = event.touches[0];\n            this.previousTouch.x = touch.clientX;\n            this.previousTouch.y = touch.clientY;\n        },\n        \n        onTouchMove(event) {\n            if (!this.isDragging) return;\n            \n            const touch = event.touches[0];\n            const deltaX = touch.clientX - this.previousTouch.x;\n            const deltaY = touch.clientY - this.previousTouch.y;\n\n            // 更新旋转角度\n            this.currentRotation.y += deltaX * this.rotationSpeed;\n            this.currentRotation.x += deltaY * this.rotationSpeed;\n\n            // 限制垂直旋转范围\n            this.currentRotation.x = Math.max(-Math.PI / 3, Math.min(Math.PI / 3, this.currentRotation.x));\n\n            // 应用旋转\n            if (this.revolver) {\n                this.revolver.rotation.y = this.currentRotation.y;\n                this.revolver.rotation.x = this.currentRotation.x;\n            }\n\n            // 更新前一个触摸点\n            this.previousTouch.x = touch.clientX;\n            this.previousTouch.y = touch.clientY;\n        },\n        \n        onTouchEnd(event) {\n            this.isDragging = false;\n        },\n        \n        beforeDestroy() {\n            if (this.animationFrameId && this.canvas) {\n                this.canvas.cancelAnimationFrame(this.animationFrameId);\n            }\n        }\n    }\n}\n</script>\n\n<style>\n.container {\n    width: 100vw;\n    height: 100vh;\n    position: relative;\n    background-color: #dddddd;\n}\n\n.webgl-canvas {\n    width: 100%;\n    height: 100%;\n    touch-action: none;\n}\n\n.controls {\n    position: fixed;\n    bottom: 40rpx;\n    left: 0;\n    right: 0;\n    display: flex;\n    justify-content: center;\n    gap: 40rpx;\n    padding: 0 40rpx;\n}\n\n.spin-btn,\n.fire-btn {\n    flex: 1;\n    max-width: 300rpx;\n    padding: 20rpx;\n    border-radius: 10rpx;\n    background: rgba(255, 0, 222, 0.8);\n    color: white;\n    border: none;\n    font-size: 32rpx;\n}\n\n.fire-btn {\n    background: rgba(255, 0, 0, 0.8);\n}\n</style> ","import MiniProgramPage from '/Users/weitao/Desktop/ThinGift/drink-app/pages/game/revolver.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","markRaw","createScopedThreejs","cylinder","frame","grip","hammer","trigger"],"mappings":"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"}