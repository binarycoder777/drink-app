{"version":3,"file":"drink-dare.js","sources":["pages/game/drink-dare.vue","pages/game/drink-dare.vue?type=page"],"sourcesContent":["<template>\n    <view class=\"container\">\n        <view class=\"header\">\n            <text class=\"title\">认怂声明书</text>\n            <text class=\"subtitle\">庄重宣告，实属无奈</text>\n        </view>\n        \n        <view class=\"challenge-card neon-box\" ref=\"cardRef\">\n            <text class=\"declaration-title\">认怂声明</text>\n            <view class=\"input-group\">\n                <text>姓名：</text>\n                <input v-model=\"name\" class=\"input-field\" placeholder=\"请输入姓名\"/>\n            </view>\n            <view class=\"input-group\">\n                <text>内容：</text>\n                <textarea v-model=\"content\" class=\"input-area\" placeholder=\"请输入认怂内容\"/>\n            </view>\n            <text class=\"declaration-date\">日期：{{ currentDate }}</text>\n            <text class=\"declaration-signature\">认怂者签名：____________</text>\n        </view>\n        \n        <view class=\"actions\">\n            <button class=\"btn save-btn\" @tap=\"saveToAlbum\">保存到相册</button>\n            <button class=\"btn share-btn\" @tap=\"shareToWechat\">分享到微信</button>\n        </view>\n        <canvas \n            canvas-id=\"shareCanvas\" \n            style=\"width: 600px; height: 800px; position: fixed; left: -9999px;\"\n        ></canvas>\n    </view>\n</template>\n\n<script>\nimport html2canvas from 'html2canvas'\n\nexport default {\n    data() {\n        return {\n            name: '张三',\n            content: '因本人酒量实在有限，在与王大侠的酒桌比拼中完全不是对手。' +\n                    '现本着对身体负责的态度，主动认怂，甘愿接受惩罚。' +\n                    '特此声明，以示诚意。',\n            currentDate: new Date().toLocaleDateString('zh-CN'),\n            imagePath: ''\n        }\n    },\n    methods: {\n        async generateImage() {\n            try {\n                const element = this.$refs.cardRef\n                \n                const canvas = await html2canvas(element, {\n                    useCORS: true,\n                    scale: 2,\n                    backgroundColor: null\n                })\n                \n                const tempFilePath = canvas.toDataURL('image/png')\n                \n                const [error, res] = await uni.base64ToTempFilePath({\n                    base64: tempFilePath.split(',')[1],\n                    success: (res) => {\n                        this.imagePath = res.tempFilePath\n                        return res.tempFilePath\n                    },\n                    fail: (error) => {\n                        throw error\n                    }\n                })\n                \n                if (error) {\n                    throw error\n                }\n                \n                return res.tempFilePath\n            } catch (error) {\n                uni.showToast({\n                    title: '生成图片失败',\n                    icon: 'none'\n                })\n                throw error\n            }\n        },\n        \n        async saveToAlbum() {\n            try {\n                const [error, res] = await uni.authorize({\n                    scope: 'scope.writePhotosAlbum'\n                })\n                \n                if (error) {\n                    throw error\n                }\n                \n                const filePath = await this.generateImage()\n                \n                await uni.saveImageToPhotosAlbum({\n                    filePath: filePath,\n                    success: () => {\n                        uni.showToast({\n                            title: '保存成功',\n                            icon: 'success'\n                        })\n                    },\n                    fail: (err) => {\n                        throw err\n                    }\n                })\n            } catch (error) {\n                uni.showToast({\n                    title: '保存失败',\n                    icon: 'none'\n                })\n            }\n        },\n        \n        async shareToWechat() {\n            try {\n                const filePath = await this.generateImage()\n                \n                await uni.share({\n                    provider: 'weixin',\n                    scene: 'WXSceneSession',\n                    type: 2,\n                    imageUrl: filePath,\n                    success: () => {\n                        uni.showToast({\n                            title: '分享成功',\n                            icon: 'success'\n                        })\n                    },\n                    fail: (err) => {\n                        throw err\n                    }\n                })\n            } catch (error) {\n                uni.showToast({\n                    title: '分享失败',\n                    icon: 'none'\n                })\n            }\n        }\n    }\n}\n</script>\n\n<style>\n.container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    min-height: 100vh;\n    padding: 40rpx;\n    background: linear-gradient(to bottom, #0D0D2B 0%, #1A1A3A 100%);\n}\n\n.header {\n    text-align: center;\n    margin-bottom: 60rpx;\n}\n\n.title {\n    font-size: 48rpx;\n    color: #fff;\n    text-shadow: 0 0 10px #ff00de;\n    margin-bottom: 20rpx;\n    display: block;\n}\n\n.subtitle {\n    font-size: 28rpx;\n    color: rgba(255, 255, 255, 0.8);\n    display: block;\n}\n\n.challenge-card {\n    width: 90%;\n    padding: 40rpx;\n    background: rgba(26, 11, 46, 0.95);\n    border-radius: 20rpx;\n    margin-bottom: 60rpx;\n    box-shadow: 0 0 20px #ff00de;\n    border: 2px solid #ff00de;\n}\n\n.challenge-text {\n    color: #fff;\n    font-size: 36rpx;\n    text-align: center;\n    line-height: 1.4;\n    display: block;\n}\n\n.actions {\n    width: 90%;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    gap: 30rpx;\n}\n\n.btn {\n    flex: 1;\n    padding: 30rpx;\n    border-radius: 16rpx;\n    font-size: 32rpx;\n    color: #fff;\n    border: none;\n    text-shadow: 0 0 5px #fff;\n}\n\n.dare-btn {\n    background: linear-gradient(45deg, #ff00de, #00f7ff);\n    box-shadow: 0 0 15px #00f7ff;\n}\n\n.chicken-btn {\n    background: linear-gradient(45deg, #ff6b6b, #ffc107);\n    box-shadow: 0 0 15px #ffc107;\n}\n\n.btn:active {\n    transform: scale(0.98);\n    opacity: 0.9;\n}\n\n.declaration-title {\n    color: #ff00de;\n    font-size: 40rpx;\n    text-align: center;\n    margin-bottom: 40rpx;\n    font-weight: bold;\n    display: block;\n}\n\n.declaration-text {\n    color: #fff;\n    font-size: 32rpx;\n    margin-bottom: 20rpx;\n    display: block;\n}\n\n.declaration-content {\n    color: #fff;\n    font-size: 32rpx;\n    line-height: 1.6;\n    margin-bottom: 40rpx;\n    display: block;\n    text-align: justify;\n}\n\n.declaration-date {\n    color: #fff;\n    font-size: 28rpx;\n    margin-bottom: 30rpx;\n    display: block;\n    text-align: right;\n}\n\n.declaration-signature {\n    color: #fff;\n    font-size: 28rpx;\n    margin-top: 20rpx;\n    display: block;\n    text-align: right;\n}\n\n.input-group {\n    margin-bottom: 30rpx;\n}\n\n.input-field {\n    width: 100%;\n    height: 70rpx;\n    background: rgba(255, 255, 255, 0.1);\n    border: 1px solid rgba(255, 255, 255, 0.3);\n    border-radius: 8rpx;\n    color: #fff;\n    padding: 0 20rpx;\n    margin-top: 10rpx;\n}\n\n.input-area {\n    width: 100%;\n    height: 200rpx;\n    background: rgba(255, 255, 255, 0.1);\n    border: 1px solid rgba(255, 255, 255, 0.3);\n    border-radius: 8rpx;\n    color: #fff;\n    padding: 20rpx;\n    margin-top: 10rpx;\n}\n\n.save-btn {\n    background: linear-gradient(45deg, #4CAF50, #45a049);\n    box-shadow: 0 0 15px #4CAF50;\n}\n\n.share-btn {\n    background: linear-gradient(45deg, #2196F3, #1976D2);\n    box-shadow: 0 0 15px #2196F3;\n}\n</style> ","import MiniProgramPage from '/Users/weitao/Desktop/ThinGift/drink-app/pages/game/drink-dare.vue'\nwx.createPage(MiniProgramPage)"],"names":["html2canvas","uni","res","error"],"mappings":";;AAmCA,MAAK,YAAU;AAAA,EACX,OAAO;AACH,WAAO;AAAA,MACH,MAAM;AAAA,MACN,SAAS;AAAA,MAGT,cAAa,oBAAI,QAAO,mBAAmB,OAAO;AAAA,MAClD,WAAW;AAAA,IACf;AAAA,EACH;AAAA,EACD,SAAS;AAAA,IACL,MAAM,gBAAgB;AAClB,UAAI;AACA,cAAM,UAAU,KAAK,MAAM;AAE3B,cAAM,SAAS,MAAMA,cAAW,YAAC,SAAS;AAAA,UACtC,SAAS;AAAA,UACT,OAAO;AAAA,UACP,iBAAiB;AAAA,SACpB;AAED,cAAM,eAAe,OAAO,UAAU,WAAW;AAEjD,cAAM,CAAC,OAAO,GAAG,IAAI,MAAMC,cAAAA,MAAI,qBAAqB;AAAA,UAChD,QAAQ,aAAa,MAAM,GAAG,EAAE,CAAC;AAAA,UACjC,SAAS,CAACC,SAAQ;AACd,iBAAK,YAAYA,KAAI;AACrB,mBAAOA,KAAI;AAAA,UACd;AAAA,UACD,MAAM,CAACC,WAAU;AACb,kBAAMA;AAAA,UACV;AAAA,SACH;AAED,YAAI,OAAO;AACP,gBAAM;AAAA,QACV;AAEA,eAAO,IAAI;AAAA,MACb,SAAO,OAAO;AACZF,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,SACT;AACD,cAAM;AAAA,MACV;AAAA,IACH;AAAA,IAED,MAAM,cAAc;AAChB,UAAI;AACA,cAAM,CAAC,OAAO,GAAG,IAAI,MAAMA,cAAAA,MAAI,UAAU;AAAA,UACrC,OAAO;AAAA,SACV;AAED,YAAI,OAAO;AACP,gBAAM;AAAA,QACV;AAEA,cAAM,WAAW,MAAM,KAAK,cAAc;AAE1C,cAAMA,cAAAA,MAAI,uBAAuB;AAAA,UAC7B;AAAA,UACA,SAAS,MAAM;AACXA,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAO;AAAA,cACP,MAAM;AAAA,aACT;AAAA,UACJ;AAAA,UACD,MAAM,CAAC,QAAQ;AACX,kBAAM;AAAA,UACV;AAAA,SACH;AAAA,MACH,SAAO,OAAO;AACZA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,SACT;AAAA,MACL;AAAA,IACH;AAAA,IAED,MAAM,gBAAgB;AAClB,UAAI;AACA,cAAM,WAAW,MAAM,KAAK,cAAc;AAE1C,cAAMA,cAAAA,MAAI,MAAM;AAAA,UACZ,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,SAAS,MAAM;AACXA,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAO;AAAA,cACP,MAAM;AAAA,aACT;AAAA,UACJ;AAAA,UACD,MAAM,CAAC,QAAQ;AACX,kBAAM;AAAA,UACV;AAAA,SACH;AAAA,MACH,SAAO,OAAO;AACZA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,SACT;AAAA,MACL;AAAA,IACJ;AAAA,EACJ;AACJ;;;;;;;;;;;;;AC9IA,GAAG,WAAW,eAAe;"}